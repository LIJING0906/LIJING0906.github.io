{"title":"elementUI 2.0.11自定义表头","date":"2018-11-15T13:17:30.000Z","excerpt":"","slug":"elerenderheader","comments":true,"dropcap":true,"tags":["element-ui"],"categories":["element-ui"],"updated":"2019-12-01T13:34:23.000Z","content":"<p>目前所做的项目都是后台管理系统，前端框架用的VUE，为了开发速度快，我们都会选择合适的组件库。诶！饿了么团队开发的elementUI就被我们选中啦。<br>用起来还是很顺手的，后台系统的基本功能都有示例代码，很方便，但是有些特殊的功能没有示例代码，只是文档中有简单的说明，这个只能去网上搜索一些大神的博客来帮忙啦。<br>因为所用的版本是2.0.11，所以本文所讲都是该版本的表格，后续版本有新增另外的方法，注意看自己所用的版本号是否有本文所讲的属性。</p>\n<h1 id=\"拦路虎\"><a href=\"#拦路虎\" class=\"headerlink\" title=\"拦路虎\"></a><strong>拦路虎</strong></h1><p><img src=\"/2018/11/15/elerenderheader/llh.png\" alt=\"拦路虎\"><br>如上图，有时我们需要对表头字段作一些解释</p>\n<h1 id=\"打虎\"><a href=\"#打虎\" class=\"headerlink\" title=\"打虎\"></a><strong>打虎</strong></h1><p><a href=\"http://element-cn.eleme.io/#/zh-CN/component/table\" target=\"_blank\" rel=\"noopener\">elementUI官网</a>只给了一个属性解释，没有任何示例代码：<br><img src=\"/2018/11/15/elerenderheader/eletableattr.png\" alt=\"属性解释\"><br>网上搜罗一番，结合自己的需求写成如下代码：<br>html代码如图：<br><img src=\"/2018/11/15/elerenderheader/tableheader.png\" alt=\"html代码\"><br>JS代码如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">renderHeader(h, &#123;column, $index&#125;)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> h(</span><br><span class=\"line\">        <span class=\"string\">\"el-popover\"</span>,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            props: &#123;</span><br><span class=\"line\">                placement: <span class=\"string\">\"right\"</span>,</span><br><span class=\"line\">                trigger: <span class=\"string\">\"hover\"</span>,</span><br><span class=\"line\">                popperClass : <span class=\"string\">\"popperClassResOut\"</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,<span class=\"comment\">//此对象是定义el-popover的各属性</span></span><br><span class=\"line\">        [</span><br><span class=\"line\">          <span class=\"comment\">// h(</span></span><br><span class=\"line\">          <span class=\"comment\">//     \"div\",</span></span><br><span class=\"line\">          <span class=\"comment\">//     [`解释1：即巴拉巴拉爸爸不啦啦啦。`]</span></span><br><span class=\"line\">          <span class=\"comment\">// ),</span></span><br><span class=\"line\">          <span class=\"comment\">// h(</span></span><br><span class=\"line\">          <span class=\"comment\">//     \"div\",</span></span><br><span class=\"line\">          <span class=\"comment\">//     [`解释2：即哈哈化歘持续哈哈航爱占计划。`]</span></span><br><span class=\"line\">          <span class=\"comment\">// ),</span></span><br><span class=\"line\">          <span class=\"comment\">// h(</span></span><br><span class=\"line\">          <span class=\"comment\">//     \"div\",</span></span><br><span class=\"line\">          <span class=\"comment\">//     [`解释1及解释2的反鸟返很久烦烦烦烦分行恒`]</span></span><br><span class=\"line\">          <span class=\"comment\">// ),</span></span><br><span class=\"line\">            h(</span><br><span class=\"line\">                <span class=\"string\">\"div\"</span>,</span><br><span class=\"line\">                [</span><br><span class=\"line\">                    <span class=\"string\">`解释1：即巴拉巴拉爸爸不啦啦啦1。`</span>, </span><br><span class=\"line\">                    h(<span class=\"string\">'br'</span>), </span><br><span class=\"line\">                    <span class=\"string\">`解释2：即哈哈化歘持续哈哈航爱占计划1。`</span>, </span><br><span class=\"line\">                    h(<span class=\"string\">'br'</span>), </span><br><span class=\"line\">                    <span class=\"string\">'解释1及解释2的反鸟返很久烦烦烦烦分行恒1'</span></span><br><span class=\"line\">                ]</span><br><span class=\"line\">            ),<span class=\"comment\">//这个h函数可以替代上方注释的代码</span></span><br><span class=\"line\">            h(</span><br><span class=\"line\">                <span class=\"string\">\"span\"</span>,</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    slot: <span class=\"string\">\"reference\"</span></span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                [</span><br><span class=\"line\">                    column.label,</span><br><span class=\"line\">                    h(<span class=\"string\">\"i\"</span>, &#123;</span><br><span class=\"line\">                        class: \"el-icon-question\",</span><br><span class=\"line\">                        style: &#123;</span><br><span class=\"line\">                            marginLeft: <span class=\"string\">\"4px\"</span>,</span><br><span class=\"line\">                            cursor: <span class=\"string\">\"pointer\"</span>,</span><br><span class=\"line\">                            color: <span class=\"string\">\"#ea9518\"</span>,</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                ]</span><br><span class=\"line\">            ),<span class=\"comment\">//这个h函数是渲染问号图标和被解释的表头字段文字</span></span><br><span class=\"line\">        ]</span><br><span class=\"line\">    )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>仔细观察上面的h函数，第一个参数：标签名(字符串)，第二个参数：标签属性(对象)，第三个参数：第一个参数的子元素(数组)，数组的元素又重复h函数。<br>其实这个h函数就是在写html代码，其中的层级关系自己很好把握。</p>\n<h1 id=\"又有大老虎\"><a href=\"#又有大老虎\" class=\"headerlink\" title=\"又有大老虎\"></a><strong>又有大老虎</strong></h1><p>如果表头有筛选<br><img src=\"/2018/11/15/elerenderheader/filterllh.png\" alt=\"表头筛选\"></p>\n<h1 id=\"打不死你才怪\"><a href=\"#打不死你才怪\" class=\"headerlink\" title=\"打不死你才怪\"></a><strong>打不死你才怪</strong></h1><p>那么数据绑定有一些更改，如下图<br><img src=\"/2018/11/15/elerenderheader/filter.png\" alt=\"\"><br>JS代码如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">renderHeader2(h, &#123;column, $index&#125;) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> filters = [&#123;<span class=\"attr\">value</span>:<span class=\"string\">\"\"</span>, <span class=\"attr\">label</span>:<span class=\"string\">'全部'</span>&#125;];</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> item <span class=\"keyword\">in</span> column.filteredValue)&#123;</span><br><span class=\"line\">        filters.push(column.filteredValue[item])</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> h(<span class=\"string\">'div'</span>,&#123;</span><br><span class=\"line\">        style: &#123;</span><br><span class=\"line\">            height: <span class=\"string\">'30px'</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    [</span><br><span class=\"line\">        h(</span><br><span class=\"line\">            <span class=\"string\">\"el-select\"</span>,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">            props: &#123;</span><br><span class=\"line\">                placeholder: <span class=\"string\">''</span>,</span><br><span class=\"line\">                value: column.label,  <span class=\"comment\">//‘姓名’</span></span><br><span class=\"line\">                clearable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">                popperClass:<span class=\"string\">'popperClassResOut'</span>,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            class: 'filtersSelect', //下拉选择框的类名，方便调整样式</span><br><span class=\"line\">            on: &#123;</span><br><span class=\"line\">                input: <span class=\"function\"><span class=\"params\">value</span> =&gt;</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(value != <span class=\"string\">''</span>)&#123;</span><br><span class=\"line\">                        column.label = column.filterPlacement+<span class=\"string\">'('</span>+value+<span class=\"string\">')'</span></span><br><span class=\"line\">                    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                        column.label = column.filterPlacement+<span class=\"string\">'(全部)'</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"comment\">// this.callback &amp;&amp; this.callback();</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"comment\">//下拉选择触发的事件</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            [</span><br><span class=\"line\">            filters.map(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> h(<span class=\"string\">\"el-option\"</span>, &#123;</span><br><span class=\"line\">                props: &#123;</span><br><span class=\"line\">                    value: item.value,</span><br><span class=\"line\">                    label: item.label</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">            ] <span class=\"comment\">//下拉选项</span></span><br><span class=\"line\">        )</span><br><span class=\"line\">    ])</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></p>\n<p>下拉框的样式如下：<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#elerenderheader</span> <span class=\"selector-class\">.filtersSelect</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">vertical-align</span>: middle;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#elerenderheader</span> <span class=\"selector-class\">.filtersSelect</span> <span class=\"selector-tag\">div</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">white-space</span>: normal;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#elerenderheader</span> <span class=\"selector-class\">.filtersSelect</span> <span class=\"selector-class\">.el-input</span> <span class=\"selector-tag\">input</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: transparent;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: none;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">110px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span> <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: bold;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#elerenderheader</span> <span class=\"selector-class\">.filtersSelect</span> <span class=\"selector-class\">.el-input__icon</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">16px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">16px</span>;</span><br><span class=\"line\">    background-image: url(\"../assets/ic_sx.png\"); //漏斗图标</span><br><span class=\"line\">    <span class=\"selector-tag\">background-size</span><span class=\"selector-pseudo\">:16px</span> 16<span class=\"selector-tag\">px</span>;</span><br><span class=\"line\">    <span class=\"selector-tag\">background-repeat</span><span class=\"selector-pseudo\">:no-repeat</span>;</span><br><span class=\"line\">    <span class=\"selector-tag\">vertical-align</span>: <span class=\"selector-tag\">middle</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#elerenderheader</span> <span class=\"selector-class\">.filtersSelect</span> <span class=\"selector-class\">.el-input__icon</span><span class=\"selector-pseudo\">:before</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">content</span>: <span class=\"string\">''</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#elerenderheader</span> <span class=\"selector-class\">.filtersSelect</span> <span class=\"selector-class\">.el-select__caret</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">transform</span>: none;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-transform</span>:none;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n","prev":{"title":"CSS3过渡和动画","slug":"css3anitran"},"next":{"title":"vue的过渡小记（多元素、多组件）","slug":"vuetransition"},"link":"/elerenderheader","toc":[{"title":"<strong>拦路虎</strong>","id":"拦路虎","index":"1"},{"title":"<strong>打虎</strong>","id":"打虎","index":"2"},{"title":"<strong>又有大老虎</strong>","id":"又有大老虎","index":"3"},{"title":"<strong>打不死你才怪</strong>","id":"打不死你才怪","index":"4"}]}