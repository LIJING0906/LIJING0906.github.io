{"title":"什么是BFC？BFC有什么用？BFC怎么用？","date":"2020-08-02T07:38:29.000Z","excerpt":"","slug":"BFC","comments":true,"dropcap":true,"tags":["CSS"],"categories":["CSS"],"updated":"2020-08-02T10:52:06.620Z","content":"<h1 id=\"BFC的定义\"><a href=\"#BFC的定义\" class=\"headerlink\" title=\"BFC的定义\"></a><strong>BFC的定义</strong></h1><p><code>BFC</code>全称“<code>Block Formatting Context</code>”, 中文为“块级格式化上下文”。它是一个独立的渲染区域，只有<code>Block-level box</code>参与， 它规定了内部的<code>Block-level Box</code>如何布局，并且与这个区域外部毫不相干。<br>在解释什么是<code>BFC</code>之前，我们需要先知道<code>Box</code>和<code>Formatting Context</code>的概念。</p>\n<h3 id=\"Box：css布局的基本单位\"><a href=\"#Box：css布局的基本单位\" class=\"headerlink\" title=\"Box：css布局的基本单位\"></a>Box：css布局的基本单位</h3><p><code>Box</code>是<code>CSS</code>布局的对象和基本单位，一个页面是由很多个<code>Box</code>组成的。元素的类型和<code>display</code>属性，决定了这个<code>Box</code>的类型。不同类型的<code>Box</code>，会参与不同的<code>Formatting Context</code>，会以不同的方式渲染。主要的<code>Box</code>（盒子）类型有：</p>\n<ul>\n<li><code>block-level box</code>: <code>display</code>属性为<code>block</code>, <code>inline-block</code>, <code>list-item</code>, <code>table</code>的元素，会生成<code>block-level box</code>，并且参与<code>block fomatting context</code>；</li>\n<li><code>inline-level box</code>: <code>display</code>属性为<code>inline</code>, <code>inline-block</code>, <code>inline-table</code>的元素，会生成<code>inline-level box</code>，并且参与<code>inline formatting context</code>；</li>\n<li><code>run-in box</code>: <code>css3</code>中才有， 这儿先不讲了。</li>\n</ul>\n<h3 id=\"Formatting-Context：决定如何渲染文档的容器\"><a href=\"#Formatting-Context：决定如何渲染文档的容器\" class=\"headerlink\" title=\"Formatting Context：决定如何渲染文档的容器\"></a>Formatting Context：决定如何渲染文档的容器</h3><p><code>Formatting context</code>是<code>W3C CSS2.1</code>规范中的一个概念。它是页面中的一块渲染区域，并且有一套渲染规则，它决定了其子元素将如何定位，以及和其他元素的关系和相互作用。最常见的<code>Formatting context</code>有<code>Block fomatting context</code>(简称<code>BFC</code>)和<code>Inline formatting context</code>(简称<code>IFC</code>)。<br><strong>BFC是一个独立的布局环境，其中的元素布局是不受外界的影响，并且在一个BFC中，块盒与行盒（行盒由一行中所有的内联元素所组成）都会垂直的沿着其父元素的边框排列。BFC元素特性表现原则就是，内部子元素再怎么翻江倒海，翻云覆雨都不会影响外部的元素，外部元素也不会影响到BFC内部的元素布局。</strong></p>\n<h1 id=\"BFC的布局规则\"><a href=\"#BFC的布局规则\" class=\"headerlink\" title=\"BFC的布局规则\"></a><strong>BFC的布局规则</strong></h1><ul>\n<li>内部的<code>Box</code>会在垂直方向，一个接一个地放置。</li>\n<li><code>Box</code>垂直方向的距离由<code>margin</code>决定。属于同一个<code>BFC</code>的两个相邻<code>Box</code>的<code>margin</code>会发生重叠。</li>\n<li>每个盒子（块盒与行盒）的<code>margin box</code>的左边，与包含块<code>border box</code>的左边相接触(对于从左往右的格式化，否则相反)，即使存在浮动也是如此。</li>\n<li><code>BFC</code>的区域不会与<code>float box</code>重叠。</li>\n<li><code>BFC</code>就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之亦然。</li>\n<li>计算<code>BFC</code>的高度时，浮动元素也参与计算。</li>\n</ul>\n<h1 id=\"如何创建BFC\"><a href=\"#如何创建BFC\" class=\"headerlink\" title=\"如何创建BFC\"></a><strong>如何创建BFC</strong></h1><ol>\n<li>根元素，即<code>html</code></li>\n<li><code>float</code>的值不是<code>none</code>。（<code>left</code>、<code>right</code>）</li>\n<li><code>overflow</code>的值不是<code>visible</code>。（<code>auto</code>、<code>scroll</code>、<code>hidden</code>）</li>\n<li><code>position</code>的值不是<code>static</code>或者<code>relative</code>。（<code>absolute</code>、<code>fixed</code>）</li>\n<li><code>display</code>的值是<code>inline-block</code>、<code>inline-flex</code>、<code>flex</code>、<code>table-cell</code>、<code>table-caption</code></li>\n</ol>\n<h1 id=\"BFC的作用\"><a href=\"#BFC的作用\" class=\"headerlink\" title=\"BFC的作用\"></a><strong>BFC的作用</strong></h1><h3 id=\"避免margin重叠（穿透）\"><a href=\"#避免margin重叠（穿透）\" class=\"headerlink\" title=\"避免margin重叠（穿透）\"></a>避免margin重叠（穿透）</h3><p>根元素下的两个元素都不是<code>BFC</code>的效果：<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>1--看看我的margin是多少<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>2--看看我的margin是多少<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*&#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    padding: 0; // 清除所有标签的margin和padding避免干扰</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#f55</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: yellow;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">text-align</span>:center;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"/2020/08/02/BFC/bfc1.png\" alt=\"\"><br>可以看到同属于<code>HTML</code>下的两个<code>P</code>标签的<code>margin</code>重叠，原因就是<strong>BFC的布局规则</strong>第二条所讲的属于同一个<code>BFC</code>的两个相邻<code>Box</code>的<code>margin</code>会发生重叠。<br>那把其中一个<code>P</code>标签变成<code>BFC</code>就能解决<code>margin</code>重叠的问题：<br>给第一个<code>P</code>标签包裹一个<code>div</code>。为什么需要包裹？因为<code>P</code>中的内容不是<code>Block-level box</code>，没有<code>margin</code>属性，因此包上一层<code>div</code>，给<code>div</code>设置样式<code>overflow: hidden</code>（非<code>visible</code>即可），里面的<code>P</code>是<code>Block-level box</code>有<code>margin</code>属性，就能看到两个<code>P</code>标签的<code>margin</code>都生效且不重叠。<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>1--看看我的margin是多少<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>2--看看我的margin是多少<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"/2020/08/02/BFC/bfc2.png\" alt=\"\"></p>\n<h3 id=\"自适应两栏布局\"><a href=\"#自适应两栏布局\" class=\"headerlink\" title=\"自适应两栏布局\"></a>自适应两栏布局</h3><p>根据<strong>BFC的布局规则</strong>第三条：每个盒子的<code>margin box</code>的左边，与包含块<code>border box</code>的左边相接触(对于从左往右的格式化，否则相反)，即使存在浮动也是如此：<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"left\"</span>&gt;</span>LEFT float-left<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"right\"</span>&gt;</span>RIGHT<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*&#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: <span class=\"number\">50px</span>; <span class=\"comment\">/* 测试包含块border box的左边 */</span></span><br><span class=\"line\">    <span class=\"attribute\">border-left</span>: <span class=\"number\">1px</span> solid red; <span class=\"comment\">/* 测试包含块border box的左边 */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.left</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">150px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">150px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"built_in\">rgb</span>(139, 214, 78);</span><br><span class=\"line\">    <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">150px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.right</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"built_in\">rgb</span>(170, 54, 236);</span><br><span class=\"line\">    <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: <span class=\"number\">20px</span>; <span class=\"comment\">/* 测试盒子的margin box的左边 */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>浮动的<code>.left</code>和正常的<code>.right</code>的<code>margin box</code>左边都与包含块<code>border box</code>的左边相接触<br><img src=\"/2020/08/02/BFC/bfc3.png\" alt=\"\"><br>要实现两栏布局，根据<strong>BFC的布局规则</strong>第四条：<code>BFC</code>的区域不会与<code>float box</code>重叠，给<code>.right</code>盒子设置<code>overflow：hidden</code>（非<code>visible</code>即可）。<br><img src=\"/2020/08/02/BFC/bfc4.png\" alt=\"\"></p>\n<h3 id=\"清除浮动\"><a href=\"#清除浮动\" class=\"headerlink\" title=\"清除浮动\"></a>清除浮动</h3><p>当我们不给父节点设置高度，子节点设置浮动的时候，会发生高度塌陷，这个时候我们就要清楚浮动。<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"par\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"child\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"child\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.par</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">5px</span> solid <span class=\"built_in\">rgb</span>(91, 243, 30);</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.child</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">5px</span> solid <span class=\"built_in\">rgb</span>(233, 250, 84);</span><br><span class=\"line\">    <span class=\"attribute\">width</span>:<span class=\"number\">100px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"/2020/08/02/BFC/bfc5.png\" alt=\"\"><br>根据<strong>BFC的布局规则</strong>最后一条：计算<code>BFC</code>的高度时，浮动元素也参与计算，给父节点激活<code>BFC</code>：<br><img src=\"/2020/08/02/BFC/bfc6.png\" alt=\"\"><br><a href=\"https://blog.csdn.net/sinat_36422236/article/details/88763187\" target=\"_blank\" rel=\"noopener\">参考链接</a></p>\n","next":{"title":"var、let和const的区别","slug":"varletconst"},"link":"/BFC","toc":[{"title":"<strong>BFC的定义</strong>","id":"BFC的定义","index":"1"},{"title":"<strong>BFC的布局规则</strong>","id":"BFC的布局规则","index":"2"},{"title":"<strong>如何创建BFC</strong>","id":"如何创建BFC","index":"3"},{"title":"<strong>BFC的作用</strong>","id":"BFC的作用","index":"4"}]}